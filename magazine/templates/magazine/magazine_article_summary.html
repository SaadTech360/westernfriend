{% load wagtailcore_tags %}

<article class="card bg-base-100 shadow-sm hover:shadow-md transition-shadow mb-4">
    <div class="card-body">
        <h3 class="card-title">
            <a href="{% pageurl article %}">
                {{ article.title }}
            </a>
        </h3>

        {% with author_links=article.authors.all %}
            {% if author_links %}
                <div class="mb-2">
                    <span class="font-medium">Author(s):</span>
                    {% for author in author_links %}
                        {% if author.author.live %}
                            <a href="{% pageurl author.author %}">{{ author.author }}</a>{% if not forloop.last %}, {% endif %}
                        {% else %}
                            {{ author.author }}{% if not forloop.last %}, {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <div class="prose">
            {{ article.teaser|richtext }}
        </div>

        {% with issue=article.get_parent %}
            <div class="card-actions">
                <span>
                    Issue: <a href="{% pageurl issue %}" class="link">
                        {{ issue }}
                        {% if issue.specific.publication_date %}
                            (<time datetime="{{ issue.specific.publication_date|date:'Y-m-d' }}">
                                {{ issue.specific.publication_date|date:"F Y" }}
                            </time>)
                        {% endif %}
                    </a>
                </span>
            </div>
        {% endwith %}
    </div>
</article>
